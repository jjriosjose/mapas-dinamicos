
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Mapa 1 - Eduar</title>
    <style>
        body, html { margin:0; padding:0; height:100%; width:100%; overflow-x:hidden; }
        #map { height:100%; width:100%; }
        #controls {
            padding:10px; background:rgba(255,255,255,0.95);
            position:absolute; top:60px; left:10px;
            z-index:1000; border-radius:10px;
            box-shadow:0px 0px 6px #888;
            max-width:35%; display:none;
        }
        @media (max-width: 768px) {
            #controls { max-width:55%; }
        }
        select, button, input {
            margin:5px 0; width:100%; font-size:15px; padding:5px;
        }
        .button-group button { display:block; width:100%; margin:5px 0; }
        #toggleButton {
            position:absolute; top:10px; left:10px;
            background:#007bff; color:white; border:none;
            border-radius:6px; padding:8px 12px;
            font-size:18px; z-index:1500; cursor:pointer;
        }
        #toggleButton span { display:block; font-size:12px; }
        #errorMsg {
            position:absolute; bottom:10px; left:10px; right:10px;
            background:rgba(255,0,0,0.85); color:white; padding:8px;
            border-radius:6px; text-align:center; font-size:14px;
            display:none; z-index:2000;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
<button id="toggleButton">☰<span>Filtros</span></button>
<div id="controls">
    <label>Condición:</label><br>
    <select id="condicion">
        <option value="">-- Seleccione --</option>
        <option value="Programado">Programado</option>
        <option value="Pendiente">Pendiente</option>
    </select><br>
    <label>Semana:</label><br>
    <select id="semana">
        <option value="">-- Seleccione --</option>
        <option value="1">Semana 1</option>
        <option value="2">Semana 2</option>
        <option value="3">Semana 3</option>
        <option value="4">Semana 4</option>
    </select><br>
    <label>Día de la Semana:</label><br>
    <select id="dia">
        <option value="">-- Seleccione --</option>
        <option value="LUNES">Lunes</option>
        <option value="MARTES">Martes</option>
        <option value="MIERCOLES">Miércoles</option>
        <option value="JUEVES">Jueves</option>
        <option value="VIERNES">Viernes</option>
    </select><br>
    <label>Gestor:</label><br>
    <select id="gestor">
        <option value="">-- Seleccione --</option>
    </select><br>
    <label>Vendedor:</label><br>
    <select id="vendedor">
        <option value="">-- Seleccione --</option>
    </select><br>
    <label>Buscar Cliente:</label><br>
    <input type="text" id="buscador" placeholder="Escriba el nombre..."><br>
    <label>Cliente:</label><br>
    <select id="cliente">
        <option value="">-- Seleccione --</option>
    </select><br>
    <div class="button-group">
        <button id="visitar">Visitar</button>
        <button id="registro" disabled>Registro</button>
        <button id="nuevoCliente">Nuevo Cliente</button>
    </div>
</div>
<div id="map"></div>
<div id="errorMsg"></div>

<script>
    var data = [{"cod empresa": "distribuidora1834", "razonsocial": "WIDRO IMPORT", "latitud": 18.47277, "longitud": -69.88572, "semana": 1.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka1211", "razonsocial": "TIENDAS MERENGUE", "latitud": 18.48276, "longitud": -69.89125, "semana": 2.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "karaka984", "razonsocial": "TIENDA ARGELIS", "latitud": 18.49905, "longitud": -69.92547, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka35", "razonsocial": "TEJON & CIA", "latitud": 18.48292, "longitud": -69.89158, "semana": 1.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "karaka585", "razonsocial": "SUPERMERCADO CUMBRE", "latitud": 18.51612, "longitud": -69.84503, "semana": 1.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka507", "razonsocial": "SUPERMERCADO CARIBE S.R.L.", "latitud": 18.4475, "longitud": -69.93544, "semana": 1.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "distribuidora1866", "razonsocial": "SUPERMERCADO CARIBE", "latitud": 18.4475, "longitud": -69.93544, "semana": 1.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora2929", "razonsocial": "SUPERMERCADO ASIA", "latitud": 18.49485, "longitud": -69.86393, "semana": 1.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka1040", "razonsocial": "SMARKET SRL", "latitud": 18.52192, "longitud": -70.00336, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "distribuidora2282", "razonsocial": "SMARKET (S/M LA BENDICION)", "latitud": 18.52192, "longitud": -70.00336, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "distribuidora589", "razonsocial": "SERKASA", "latitud": 19.3953, "longitud": -70.53078, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Pendiente"}, {"cod empresa": "karaka1249", "razonsocial": "SERKASA", "latitud": 19.3953, "longitud": -70.53078, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Pendiente"}, {"cod empresa": "karaka839", "razonsocial": "SAVIO DISTRIBUCIONES, SRL", "latitud": 18.46978, "longitud": -69.93742, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka852", "razonsocial": "ROSARIO ESPAILLAT, SRL (SFM)", "latitud": 19.29686, "longitud": -70.25583, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka850", "razonsocial": "ROSARIO ESPAILLAT, SRL (LA VEGA)", "latitud": 19.21846, "longitud": -70.5311, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka851", "razonsocial": "ROSARIO ESPAILLAT, SRL (LA VEGA 2)", "latitud": 19.22506, "longitud": -70.52133, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka896", "razonsocial": "ROSARIO ESPAILLAT, S.R.L. (SANTIAGO)", "latitud": 19.45498, "longitud": -70.70247, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka897", "razonsocial": "ROSARIO ESPAILLAT, S.R.L. (MOCA)", "latitud": 19.39475, "longitud": -70.52883, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka948", "razonsocial": "ROSARIO ESPAILLAT SRL SFM2", "latitud": 19.29985, "longitud": -70.25916, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka916", "razonsocial": "ROSARIO ESPAILLAT S.R.L.", "latitud": 18.48791, "longitud": -69.89665, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka889", "razonsocial": "ROSARIO ESPAILLAT (STO. DGO) LA 70", "latitud": 18.48773, "longitud": -69.89938, "semana": 4.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka889", "razonsocial": "ROSARIO ESPAILLAT (STO. DGO) LA 70", "latitud": 18.48773, "longitud": -69.89938, "semana": 2.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka947", "razonsocial": "ROSARIO ESPAILLAT (SANTIAGO)", "latitud": 19.45498, "longitud": -70.70247, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka849", "razonsocial": "ROSARIO ESPAILLAT (BONAO)", "latitud": 18.93371, "longitud": -70.40862, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2944", "razonsocial": "RILON TRADING, SRL", "latitud": 18.52376, "longitud": -69.83766, "semana": 1.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka993", "razonsocial": "RILON TRADING, SRL", "latitud": 18.52376, "longitud": -69.83766, "semana": 1.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka1078", "razonsocial": "RAMON ANTONIO FLORES NUÃ‘EZ (DÂ´ NORKY)", "latitud": 18.55846, "longitud": -69.90497, "semana": 3.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka588", "razonsocial": "PLAZA LEONARDO, S.R.L.", "latitud": 18.4766, "longitud": -69.97461, "semana": 4.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "distribuidora89", "razonsocial": "PLAZA LEONARDO", "latitud": 18.4766, "longitud": -69.97461, "semana": 4.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "distribuidora2693", "razonsocial": "LA BENDICION DEL 20 Y 10 ( LOS RIOS)", "latitud": 18.48745, "longitud": -69.96724, "semana": 4.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka589", "razonsocial": "ENCAJE LA ROSARIO", "latitud": 18.47161, "longitud": -69.94275, "semana": 4.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka713", "razonsocial": "BENIGNO ZAPATERO, SRL", "latitud": 18.45933, "longitud": -69.96988, "semana": 4.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka588", "razonsocial": "PLAZA LEONARDO, S.R.L.", "latitud": 18.4766, "longitud": -69.97461, "semana": 1.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "distribuidora89", "razonsocial": "PLAZA LEONARDO", "latitud": 18.4766, "longitud": -69.97461, "semana": 1.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka348", "razonsocial": "PLAZA LAMA SANTIAGO", "latitud": 19.45643, "longitud": -70.70102, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka461", "razonsocial": "PLAZA LAMA SAN ISIDRO", "latitud": 18.48881, "longitud": -69.82616, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka225", "razonsocial": "PLAZA LAMA OVANDO", "latitud": 18.50051, "longitud": -69.91482, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka307", "razonsocial": "PLAZA LAMA ORIENTAL", "latitud": 18.52172, "longitud": -69.8375, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka117", "razonsocial": "PLAZA LAMA LA ROMANA", "latitud": 18.42433, "longitud": -68.96425, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka92", "razonsocial": "PLAZA LAMA CENTRO DE DISTRIBUCION GRAL.", "latitud": 18.51108, "longitud": -70.00315, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka271", "razonsocial": "PLAZA LAMA (HERRERA)", "latitud": 18.47534, "longitud": -69.9711, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka919", "razonsocial": "PLAZA LAMA (AUTOPISTA DUARTE)", "latitud": 19.2901, "longitud": -70.52519, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka272", "razonsocial": "PLAZA LAMA (27 DE FEBRERO)", "latitud": 18.46207, "longitud": -69.93616, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka13", "razonsocial": "PLAZA LAMA", "latitud": 18.46221, "longitud": -69.93617, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka1047", "razonsocial": "PERLALBA COMERCIAL, SRL(VILLA MELLA)", "latitud": 18.5566, "longitud": -69.9015, "semana": 3.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka1047", "razonsocial": "PERLALBA COMERCIAL, SRL(VILLA MELLA)", "latitud": 18.5566, "longitud": -69.9015, "semana": 1.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka1045", "razonsocial": "PERLALBA COMERCIAL, SRL (MAIMON)", "latitud": 19.05254, "longitud": -70.14863, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "karaka412", "razonsocial": "PELAEZ & TEJON,SRL", "latitud": 18.54574, "longitud": -69.90039, "semana": 1.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "distribuidora2231", "razonsocial": "PELAEZ & TEJON", "latitud": 18.54574, "longitud": -69.90039, "semana": 1.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "distribuidora1831", "razonsocial": "NOVEDADES JIREH", "latitud": 18.52628, "longitud": -70.02717, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka995", "razonsocial": "NOVEDADES JIREH", "latitud": 18.52628, "longitud": -70.02717, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka996", "razonsocial": "MAXAR INTERCARIBE, SRL", "latitud": 19.49972, "longitud": -70.65821, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "distribuidora3061", "razonsocial": "MAX COMERCIAL, SRL.", "latitud": 18.48795, "longitud": -69.89968, "semana": 4.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka816", "razonsocial": "MAX COMERCIAL, SRL.", "latitud": 18.48795, "longitud": -69.89968, "semana": 4.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka1372", "razonsocial": "LISTO FERRETERIA MANUEL CORRIPIO", "latitud": 18.4791513871475, "longitud": -69.9645735242873, "semana": 4.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "distribuidora2567", "razonsocial": "MAGADAN & COMPAÃ‘IA", "latitud": 18.57112, "longitud": -70.09659, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Pendiente"}, {"cod empresa": "karaka172", "razonsocial": "MAGADAN & COMPAÃ‘IA", "latitud": 18.57112, "longitud": -70.09659, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2190", "razonsocial": "LOSOM IMPORT", "latitud": 18.48723, "longitud": -69.89938, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka226", "razonsocial": "LIVERPOOL ( PEREZLIZ, S.A.)", "latitud": 18.54729, "longitud": -69.91646, "semana": 1.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "karaka1172", "razonsocial": "LE PARC", "latitud": 18.47306, "longitud": -69.93032, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "karaka1310", "razonsocial": "LA ZONA", "latitud": 18.52334, "longitud": -70.03413, "semana": 2.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka470", "razonsocial": "LA CADENA", "latitud": 18.47858, "longitud": -69.9342, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "distribuidora1610", "razonsocial": "LA BENDICION DEL 20 Y 10(VILLA MELLA)", "latitud": 18.55603, "longitud": -69.9029, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora1348", "razonsocial": "LA BENDICION DEL 20 Y 10 FANTINO", "latitud": 19.1229, "longitud": -70.30172, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2633", "razonsocial": "LA BENDICION DEL 20 Y 10 (OVANDO)", "latitud": 18.50553, "longitud": -69.89729, "semana": 4.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora2216", "razonsocial": "LA BENDICION DEL 20 Y 10 (MAIMON)", "latitud": 19.80641, "longitud": -70.78132, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2693", "razonsocial": "LA BENDICION DEL 20 Y 10 ( LOS RIOS)", "latitud": 18.48745, "longitud": -69.96724, "semana": 2.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora2235", "razonsocial": "LA BENDICION DEL 20 Y 10  (LA PALMA1)", "latitud": 18.47345, "longitud": -69.9905, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora1521", "razonsocial": "LA BENDICION DEL 20 Y 10  (LA PALMA IV)", "latitud": 18.47345, "longitud": -69.9905, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2200", "razonsocial": "LA BENDICION DEL 20 Y 10  (GUARICANO)", "latitud": 18.5554, "longitud": -69.90428, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2137", "razonsocial": "LA BENDICION DEL 20 Y 10  ( CARR. MELLA)", "latitud": 18.50328, "longitud": -69.85985, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "karaka1019", "razonsocial": "INVERSIONES MAURIFEL, S.R.L.", "latitud": 18.47469, "longitud": -69.92477, "semana": 4.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka545", "razonsocial": "INVERSIONES INMOBILIARIAS E Y D S.R.L. ( SM. CARIBE III)", "latitud": 18.43825, "longitud": -69.95174, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "karaka1101", "razonsocial": "INVERSIONES ESPINAL MOQUETE AUTO IMPORT", "latitud": 18.52818, "longitud": -69.91076, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2386", "razonsocial": "INKA ACCESORIOS (VILLA CONSUELO)", "latitud": 18.48826, "longitud": -69.89484, "semana": 2.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "distribuidora2388", "razonsocial": "INKA  ACCESORIOS (SANTIAGO)", "latitud": 19.45189, "longitud": -70.70256, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2871", "razonsocial": "INKA  ACCESORIOS (SAMBIL)", "latitud": 18.48223, "longitud": -69.91157, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2178", "razonsocial": "INKA  ACCESORIOS (MEGA CENTRO)", "latitud": 18.50621, "longitud": -69.85655, "semana": 3.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "distribuidora2251", "razonsocial": "IMPORTADORA LEIDI", "latitud": 18.55309, "longitud": -69.91147, "semana": 3.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka1020", "razonsocial": "IMPORTADORA LEIDI", "latitud": 18.55309, "longitud": -69.91147, "semana": 3.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "distribuidora2957", "razonsocial": "IMPORTADORA EL BARATILLO", "latitud": 18.50998, "longitud": -69.86124, "semana": 1.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka106", "razonsocial": "HERMANOS PAPATERRA", "latitud": 18.48027, "longitud": -69.97982, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka35", "razonsocial": "TEJON & CIA", "latitud": 18.48292, "longitud": -69.89158, "semana": 3.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "karaka1130", "razonsocial": "GRUPO ALTERRA (FERREMIX) (R.C.) (SUPER MIX)", "latitud": 18.52982, "longitud": -69.90766, "semana": 1.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka633", "razonsocial": "GRUPO ALTERRA (FERREMIX)", "latitud": 18.52982, "longitud": -69.90766, "semana": 1.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "distribuidora637", "razonsocial": "FLORISTERIA JULIVIOT", "latitud": 18.4686, "longitud": -69.89992, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "karaka1289", "razonsocial": "FLOREMCH IMPORTACIONES", "latitud": 18.5122, "longitud": -69.84738, "semana": 2.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka1343", "razonsocial": "FERREZIRO", "latitud": 18.51006, "longitud": -69.87614, "semana": 2.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka1130", "razonsocial": "GRUPO ALTERRA (FERREMIX) (R.C.) (SUPER MIX)", "latitud": 18.52982, "longitud": -69.90766, "semana": 3.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka633", "razonsocial": "GRUPO ALTERRA (FERREMIX)", "latitud": 18.52982, "longitud": -69.90766, "semana": 3.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "distribuidora2265", "razonsocial": "FERRETERIA COMETA", "latitud": 18.47574, "longitud": -69.88974, "semana": 3.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka128", "razonsocial": "FERRETERIA COMETA", "latitud": 18.47574, "longitud": -69.88974, "semana": 3.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "KARAKA", "razonsocial": "CADENAS CCN, GARRRIDO, OLE, SIRENA", "latitud": "", "longitud": "", "semana": 4.0, "dia": "VIERNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "KARAKA", "razonsocial": "GESTION DE COBRO / OFICINA", "latitud": 18.4721039672809, "longitud": -69.8939220468341, "semana": 4.0, "dia": "VIERNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "KARAKA", "condicion": "Programado"}, {"cod empresa": "KARAKA", "razonsocial": "GESTION DE COBRO / OFICINA", "latitud": 18.4721039672809, "longitud": -69.8939220468341, "semana": 1.0, "dia": "VIERNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "KARAKA", "condicion": "Programado"}, {"cod empresa": "KARAKA", "razonsocial": "GESTION DE COBRO / OFICINA", "latitud": 18.4721039672809, "longitud": -69.8939220468341, "semana": 3.0, "dia": "VIERNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "KARAKA", "condicion": "Programado"}, {"cod empresa": "karaka589", "razonsocial": "ENCAJE LA ROSARIO", "latitud": 18.47161, "longitud": -69.94275, "semana": 2.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "KARAKA", "razonsocial": "LEVANTAMIENTO DE AREA VZLA ALMA ROSA", "latitud": 18.494986613954, "longitud": -69.8514825543042, "semana": 1.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "KARAKA", "condicion": "Programado"}, {"cod empresa": "KARAKA", "razonsocial": "LEVANTAMIENTO DE AREA CHARLES DE GAULLE", "latitud": 18.52049452216, "longitud": -69.8369748794932, "semana": 1.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "KARAKA", "condicion": "Programado"}, {"cod empresa": "karaka613", "razonsocial": "DUME ORIENTAL SRL.", "latitud": 18.51091, "longitud": -69.85707, "semana": 1.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "EVELYN", "condicion": "Programado"}, {"cod empresa": "karaka1052", "razonsocial": "DTODO TIENDA , EIRL", "latitud": 18.53219, "longitud": -69.90694, "semana": 3.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora1023", "razonsocial": "DTODO TIENDA", "latitud": 18.53219, "longitud": -69.90694, "semana": 3.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka1052", "razonsocial": "DTODO TIENDA , EIRL", "latitud": 18.53219, "longitud": -69.90694, "semana": 1.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora1023", "razonsocial": "DTODO TIENDA", "latitud": 18.53219, "longitud": -69.90694, "semana": 1.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora205", "razonsocial": "DISTRIBUIDORA DERICK", "latitud": 18.4877, "longitud": -69.89963, "semana": 2.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora109", "razonsocial": "DISTRIBUIDORA DE CRISTALERIA", "latitud": 18.4698, "longitud": -69.8891, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Pendiente"}, {"cod empresa": "distribuidora1907", "razonsocial": "DISTRIBUIDORA COMERCIAL LA FAMILIA II(DICOFA II)", "latitud": 18.48724, "longitud": -69.89996, "semana": 4.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka508", "razonsocial": "DIONISIO QUIÃ‘ONES & ASOCIADOS S.R.L.", "latitud": 18.4475, "longitud": -69.93544, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2035", "razonsocial": "DIONISIO QUIÃ‘ONES & ASOC. (SUPERMERCADO CARIBE II)", "latitud": 18.4405, "longitud": -69.95174, "semana": 3.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka809", "razonsocial": "DICOFA", "latitud": 18.48724, "longitud": -69.89996, "semana": 4.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka955", "razonsocial": "DIAMOND MB PRODUCTIONS, SRL", "latitud": 18.53036, "longitud": -69.81351, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Pendiente"}, {"cod empresa": "KARAKA", "razonsocial": "CADENAS CCN, GARRRIDO, OLE, SIRENA", "latitud": "", "longitud": "", "semana": 2.0, "dia": "VIERNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora2653", "razonsocial": "DETALLES HOME DECOR", "latitud": 18.47743, "longitud": -69.96151, "semana": 2.0, "dia": "VIERNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka673", "razonsocial": "DETALLES HOME DECOR", "latitud": 18.47743, "longitud": -69.96151, "semana": 2.0, "dia": "VIERNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "distribuidora189", "razonsocial": "DESC. LA FRAGANCIA(LOS ALCARRIZOS)", "latitud": 18.52353, "longitud": -70.03417, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "distribuidora1349", "razonsocial": "D TITO COMERCIAL", "latitud": 18.48706, "longitud": -69.89851, "semana": 3.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "karaka1088", "razonsocial": "D TITO COMERCIAL", "latitud": 18.48706, "longitud": -69.89851, "semana": 3.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "MANUEL", "condicion": "Programado"}, {"cod empresa": "distribuidora969", "razonsocial": "COMERCIAL TEJEDA MOREL", "latitud": 18.48738, "longitud": -69.89683, "semana": 4.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "karaka958", "razonsocial": "COMERCIAL TEJEDA MOREL", "latitud": 18.48738, "longitud": -69.89683, "semana": 4.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "distribuidora969", "razonsocial": "COMERCIAL TEJEDA MOREL", "latitud": 18.48738, "longitud": -69.89683, "semana": 2.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "karaka958", "razonsocial": "COMERCIAL TEJEDA MOREL", "latitud": 18.48738, "longitud": -69.89683, "semana": 2.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "distribuidora2998", "razonsocial": "COMERCIAL MANUELA DIEZ", "latitud": 18.48727, "longitud": -69.89751, "semana": 2.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka1164", "razonsocial": "COMERCIAL MANUELA DIEZ", "latitud": 18.48727, "longitud": -69.89751, "semana": 2.0, "dia": "MIERCOLES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka564", "razonsocial": "COMERCIAL LOS PINOS", "latitud": 18.48691, "longitud": -69.89934, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka1044", "razonsocial": "COMERCIAL LA BENDICION DEL 20 Y 10 ( LOS RIOS)", "latitud": 18.48745, "longitud": -69.96724, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "karaka1035", "razonsocial": "COMERCIAL LA BENDICION DEL 20 Y 10  (GUARICANO)", "latitud": 0.0, "longitud": 0.0, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "karaka1033", "razonsocial": "COMERCIAL LA BENDICION DEL 20 Y 10  ( CARR. MELLA)", "latitud": 18.50328, "longitud": -69.85985, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "karaka1084", "razonsocial": "COMERCIAL LA BENDICION DEL 20 Y 10", "latitud": 18.50553, "longitud": -69.89729, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "distribuidora1972", "razonsocial": "COMERCIAL DE LEON", "latitud": 18.50208, "longitud": -69.84723, "semana": 4.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka82", "razonsocial": "CENTRO CUESTA NACIONAL", "latitud": 18.46261, "longitud": -69.96688, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "distribuidora2349", "razonsocial": "CASTRO IMPORT", "latitud": 18.49811, "longitud": -69.90653, "semana": 4.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "karaka1187", "razonsocial": "CASTRO IMPORT", "latitud": 18.49811, "longitud": -69.90653, "semana": 4.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Programado"}, {"cod empresa": "karaka15", "razonsocial": "CASA CONSUELO", "latitud": 18.4834, "longitud": -69.89512, "semana": 2.0, "dia": "MARTES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka773", "razonsocial": "CAM", "latitud": 18.48231, "longitud": -69.90908, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka157", "razonsocial": "C.D.H. CARREFOUR", "latitud": 18.48941, "longitud": -69.97804, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka713", "razonsocial": "BENIGNO ZAPATERO, SRL", "latitud": 18.45933, "longitud": -69.96988, "semana": 1.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka587", "razonsocial": "ASTUR, SAS", "latitud": 18.48598, "longitud": -69.9129, "semana": 3.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka1323", "razonsocial": "ALMACENES UNIDOS S.A.S.(BAVARO)", "latitud": 18.59547, "longitud": -68.38991, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka641", "razonsocial": "ALMACENES UNIDOS S.A.S.", "latitud": 18.45644, "longitud": -69.93705, "semana": 4.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "karaka398", "razonsocial": "ALMACENES UNIDOS", "latitud": 18.45641, "longitud": -69.93713, "semana": 4.0, "dia": "LUNES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "distribuidora753", "razonsocial": "ALMACENES POLANCO", "latitud": 19.39471, "longitud": -70.52815, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka1037", "razonsocial": "ALMACENES POLANCO", "latitud": 19.39471, "longitud": -70.52815, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka499", "razonsocial": "ALMACENES LA FERIA", "latitud": 18.50356, "longitud": -69.90673, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "karaka110", "razonsocial": "ALMACENES EL CANAL", "latitud": 18.46628, "longitud": -69.9681, "semana": 1.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Programado"}, {"cod empresa": "distribuidora665", "razonsocial": "ALMACENES EL CAÑON", "latitud": 18.47859, "longitud": -69.96938, "semana": 1.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka1028", "razonsocial": "ALMACENES EL CAÑON", "latitud": 18.47859, "longitud": -69.96938, "semana": 1.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}, {"cod empresa": "karaka341", "razonsocial": "ALCENTRO SAS", "latitud": 18.47198, "longitud": -69.89397, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "RYAN", "condicion": "Pendiente"}, {"cod empresa": "karaka990", "razonsocial": "ACCESORIOS INKA SRL", "latitud": 18.48826, "longitud": -69.89484, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "DIOGENES", "condicion": "Pendiente"}, {"cod empresa": "karaka1134", "razonsocial": "ACCESORIOS INKA (SAMBIL)", "latitud": 18.48223, "longitud": -69.91157, "semana": "", "dia": "", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Pendiente"}, {"cod empresa": "karaka1085", "razonsocial": "ACCESORIOS INKA", "latitud": 18.50199, "longitud": -69.96317, "semana": 2.0, "dia": "JUEVES", "vendedor": "EDUARD CEBALLOS", "gestor_servicio": "JOSE", "condicion": "Programado"}];
    var googleFormBase = "https://docs.google.com/forms/d/e/1FAIpQLSdYiea_YN63EJTjwj2KLg-Oq0AAqWaDD48ESI1NZcC6lho21g/viewform?usp=pp_url";
    var map = L.map('map').setView([18.5, -69.9], 8);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    var markersLayer = L.layerGroup().addTo(map);
    var markersDict = {};

    var clienteSelect = document.getElementById('cliente');
    var condicionSelect = document.getElementById('condicion');
    var semanaSelect = document.getElementById('semana');
    var diaSelect = document.getElementById('dia');
    var gestorSelect = document.getElementById('gestor');
    var vendedorSelect = document.getElementById('vendedor');
    var buscador = document.getElementById('buscador');
    var registroBtn = document.getElementById('registro');
    var visitarBtn = document.getElementById('visitar');
    var nuevoBtn = document.getElementById('nuevoCliente');
    var errorMsg = document.getElementById('errorMsg');

    function mostrarError(msg) {
        errorMsg.innerText = msg;
        errorMsg.style.display = 'block';
        setTimeout(() => errorMsg.style.display = 'none', 4000);
    }

    function cargarGestoresVendedores() {
        var gestores = [...new Set(data.map(c => c.gestor_servicio).filter(x => x))];
        var vendedores = [...new Set(data.map(c => c.vendedor).filter(x => x))];

        gestores.forEach(g => {
            var option = document.createElement('option');
            option.value = g; option.text = g;
            gestorSelect.appendChild(option);
        });
        vendedores.forEach(v => {
            var option = document.createElement('option');
            option.value = v; option.text = v;
            vendedorSelect.appendChild(option);
        });
    }

    function cargarClientes() {
        markersLayer.clearLayers();
        markersDict = {};
        clienteSelect.innerHTML = '<option value="">-- Seleccione --</option>';
        var bounds = [];

        data.filter(c => 
            (condicionSelect.value === '' || c.condicion === condicionSelect.value) &&
            (semanaSelect.value === '' || c.semana == semanaSelect.value) &&
            (diaSelect.value === '' || c.dia.toUpperCase() === diaSelect.value.toUpperCase()) &&
            (gestorSelect.value === '' || c.gestor_servicio === gestorSelect.value) &&
            (vendedorSelect.value === '' || c.vendedor === vendedorSelect.value) &&
            (buscador.value === '' || c.razonsocial.toLowerCase().includes(buscador.value.toLowerCase()))
        ).forEach(cliente => {
            var option = document.createElement('option');
            option.value = cliente["cod empresa"];
            option.text = cliente.razonsocial;
            clienteSelect.appendChild(option);

            if (cliente.latitud && cliente.longitud) {
                var color = cliente.condicion === "Pendiente" ? "gray" : "red";
                var marker = L.circleMarker([cliente.latitud, cliente.longitud], {
                    radius: 8,
                    color: color,
                    fillOpacity: 0.8
                }).addTo(markersLayer);

                var popup = `<b>${cliente.razonsocial}</b><br>Estado: ${cliente.condicion}`;
                if (cliente.condicion === "Programado") {
                    popup += `<br>Semana: ${cliente.semana}<br>Día: ${cliente.dia}`;
                } else {
                    popup += "<br>(sin fecha programada)";
                }
                popup += `<br><a href="#" onclick="abrirRuta('${cliente["cod empresa"]}'); return false;">Ver ruta en Google Maps</a>`;
                marker.bindPopup(popup);
                markersDict[cliente["cod empresa"]] = marker;
                bounds.push([cliente.latitud, cliente.longitud]);
            }
        });

        if (bounds.length > 0) {
            map.fitBounds(bounds);
        }
    }

    function abrirRuta(cod) {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(pos) {
                var origen = pos.coords.latitude + "," + pos.coords.longitude;
                var marker = markersDict[cod];
                if (marker) {
                    var destino = marker.getLatLng().lat + "," + marker.getLatLng().lng;
                    window.open(`https://www.google.com/maps/dir/?api=1&origin=${origen}&destination=${destino}`, '_blank');
                }
            }, function() {
                mostrarError("No se pudo obtener tu ubicación actual.");
            });
        } else {
            mostrarError("Geolocalización no soportada.");
        }
    }

    clienteSelect.addEventListener('change', function() {
        var cod = this.value;
        if (cod && markersDict[cod]) {
            map.setView(markersDict[cod].getLatLng(), 15);
            markersDict[cod].openPopup();
            registroBtn.disabled = false;
        } else {
            registroBtn.disabled = false; // siempre habilitado para registrar
        }
    });

    visitarBtn.addEventListener('click', function() {
        var cod = clienteSelect.value;
        if (!cod) {
            mostrarError("Seleccione un cliente para visitar.");
            return;
        }
        abrirRuta(cod);
    });

    registroBtn.addEventListener('click', function() {
        var cod = clienteSelect.value;
        if (!cod) {
            mostrarError("Seleccione un cliente para registrar.");
            return;
        }
        var cliente = data.find(c => c["cod empresa"] === cod);
        if (!cliente) {
            mostrarError("Cliente no encontrado.");
            return;
        }
        // Si no tiene coordenadas, usar ubicación actual
        if (!cliente.latitud || !cliente.longitud) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(pos) {
                    abrirFormulario(cliente, pos.coords.latitude, pos.coords.longitude);
                }, function() {
                    mostrarError("No se pudo obtener tu ubicación actual.");
                });
            } else {
                mostrarError("Geolocalización no soportada.");
            }
        } else {
            abrirFormulario(cliente, cliente.latitud, cliente.longitud);
        }
    });

    function abrirFormulario(cliente, lat, lon) {
        var url = googleFormBase +
            `&entry.1611618728=${encodeURIComponent(cliente.razonsocial)}` +
            `&entry.2045588314=${encodeURIComponent(cliente["cod empresa"])}` +
            `&entry.524417492=${lat}` +
            `&entry.1485709546=${lon}` +
            `&entry.666513908=${cliente.semana}` +
            `&entry.1463441705=${cliente.dia}` +
            `&entry.1996446479=${cliente.condicion}`;
        window.open(url, '_blank');
    }

    nuevoBtn.addEventListener('click', function() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(pos) {
                var url = googleFormBase +
                    `&entry.524417492=${pos.coords.latitude}` +
                    `&entry.1485709546=${pos.coords.longitude}` +
                    `&entry.1996446479=Nuevo`;
                window.open(url, '_blank');
            }, function() {
                mostrarError("No se pudo obtener tu ubicación actual.");
            });
        } else {
            mostrarError("Geolocalización no soportada.");
        }
    });

    condicionSelect.addEventListener('change', cargarClientes);
    semanaSelect.addEventListener('change', cargarClientes);
    diaSelect.addEventListener('change', cargarClientes);
    gestorSelect.addEventListener('change', cargarClientes);
    vendedorSelect.addEventListener('change', cargarClientes);
    buscador.addEventListener('input', cargarClientes);

    cargarGestoresVendedores();
    cargarClientes();

    const toggleBtn = document.getElementById('toggleButton');
    const controls = document.getElementById('controls');
    let visible = false;
    toggleBtn.addEventListener('click', () => {
        controls.style.display = visible ? 'none' : 'block';
        visible = !visible;
    });
</script>
</body>
</html>
